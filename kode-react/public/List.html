<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List</title>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <script src="Blockly/popup.js"></script>
    <title>Blockly</title>
    <script src="Blockly/blockly_compressed.js"></script>
    <script src="Blockly/blocks_compressed.js"></script>
    <script src="Blockly/en.js"></script>
    <script src="Blockly/javascript_compressed.js"></script>
    <script src="Blockly/storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="BlocklyCSS.css">
</head>
<body>
<xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
    <category name="Logic">
        <block type="lists_create_with">
            <mutation items="3"></mutation>
        </block>
        <block type="text">
            <field name="TEXT"></field>
        </block>
        <block type="text_print"></block>
    </category>
    <category name="Variables" colour="#A65C81" custom="VARIABLE"></category>
</xml>

<nav class="nav">
    <div style="display:table-cell; vertical-align:middle; text-align:center">
        <a href="/" class="ui medium image">
            <img class="ui small image"  src="Blockly/logo.png" width= "160px" height= "100px" >
        </a>
    </div>
</nav>



<div id= "alert" class="ui pointing below yellow basic label" role="alert" style="width: 700px; margin-left: 750px;">
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >First Create a Variable by clicking on 'Create Variable' from the variable category</p>
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >Create a Fruit variable.</p>
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >Drag the 'create list with' block on the workspace </p>
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >Add three fruits to the list: Apple, Orange and Banana</p>
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >Now set the Variable Fruits to the list.</p>
    <p style="color: black"><img src="https://media.giphy.com/media/3ohhwBfx3ik9jIVTOM/giphy.gif"  style="width: 30px; height: 30px;" >Now print the variable fruit</p>
</div>

<div class="ui pointing below green basic label" style="margin-left: 800px; margin-bottom: 20px" id="nextalert">
    <p style="color: black">
        Click Next
    </p>
</div>


<div class="ui pointing below red basic label" style="margin-left: 800px; margin-bottom: 20px" id="wrong" >
    <p style="color: black">
        Have you created the variable yet?
    </p>
</div>

<br />

<div class="container">
    <div class="row">
        <div class="col-sm">
            <div class="ui vertical buttons">
                <div class="runbutton">

                    <button class="ui inverted yellow button" data-toggle="tooltip" data-placement="auto"
                            title="Make sure you have written the fruit names in order!" >Hint
                        <i class="fa fa-question"></i></button>
                </div>


                <div class="runbutton">
                    <button class="ui inverted yellow button"  onclick="runCode()">
                        Run <i class="fa fa-play-circle"></i></i>
                    </button>
                </div>


                <div class="runbutton">
                    <button class="ui inverted yellow button" onclick="next()">
                        Next <i class="fa fa-forward"></i></button>
                </div>

                <div class="runbutton">
                    <button class="ui inverted yellow button" data-toggle="tooltip" data-placement="auto"
                            title="Click to save your work" onclick="saveWorkspace()">Save
                        <i class="fa fa-save 2x"></i></button>
                </div>

                <div class="runbutton">
                    <button class="ui inverted yellow button" onclick="loadWorkspace()" data-toggle="tooltip" data-placement="auto"
                            title="Click on Restore, if you saved your blocks before">Restore
                        <i class="fa fa-download"></i></button>
                </div>
                <div class="runbutton">
                    <a href="/dashboard" > <button class="ui inverted yellow button" href="/dashboard" data-toggle="tooltip" data-placement="auto"
                                                   title="Make sure to save your work before leaving!">Back to dashboard
                        <i class="fa fa-backward"></i></button>
                    </a>
                </div>

                <div>
                    <img class="ui medium circular image" src="https://media.giphy.com/media/4NrK8grfVOOUVyW6Na/giphy.gif" id="apple" style="width: 100px; height: 100px; display: none" data-title="Hello World">
                    <img class="ui medium circular image" src="https://media.giphy.com/media/ivSCbBQjwLz7q/giphy.gif" id="banana" style="width: 100px; height: 100px; display: none" data-title="Hello World">
                    <img class="ui medium circular image" src="https://media.giphy.com/media/1iqei6XMIFEZv7baTL/giphy.gif" id="orange" style="width: 100px; height: 100px; display: none" data-title="Hello World">
                </div>
            </div>
        </div>







        <script>
            $(document).ready(function(){
                $('[data-toggle="tooltip"]').tooltip();
            });
        </script>
        <br/>


        <div id="wrapper">
            <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
            <br>
        </div>

        <div id="dropElem">
            <div id="dropContent">
                <div id="dropClose">X</div>
                <div> <img src="Blockly/logo.png" width= "160px" height= "100px" style="margin-left: 200px">  </div>
                <p style="font-family: Verdana, sans-serif; text-align: center">Ready for your last exercise? </p>
                <div>
                    <p style="font-family: Verdana, sans-serif; text-align: center"> Lists hold a lot of same types of objects in one place </p>
                    <p style="font-family: Verdana, sans-serif; text-align: center">Here we will create a Fruit List that holds banana, orange and apples. </p>
                    <p style="font-family: Verdana, sans-serif;text-align: center ">Use variables to create Fruit variable and create Strings of fruit names</p>
                    <img src="https://media.giphy.com/media/3ov9k8N1DG5WiZ9CSc/giphy.gif" width= "300px" height= "300px" style="margin-left: 100px; margin-bottom: 30px" >

                    <p> PS. If you are stuck click on Hint!</p>
                </div>

            </div>
        </div>

    </div>
</div>

<script>

    var demoWorkspace = Blockly.inject('blocklyDiv',
        {toolbox: document.getElementById('toolbox')});
    Blockly.Xml.domToWorkspace(document.getElementById('startBlocks'),
        demoWorkspace);

    function runCode() {
        // Generate JavaScript code and run it.
        window.LoopTrap = 1000;
        Blockly.JavaScript.INFINITE_LOOP_TRAP =
            'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
        var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
        console.log(code);
        if(code === "var Fruit;\n" +
            "\n" +
            "\n" +
            "Fruit = ['Apple', 'Orange', 'Banana'];\n" +
            "window.alert(Fruit);\n"){
            document.getElementById("apple").style.display = "block";
            document.getElementById("banana").style.display = "block";
            document.getElementById("orange").style.display = "block";
            $('#nextalert').show();
            $('#alert').hide();
        }
    }

    function next() {
        var Jscode = Blockly.JavaScript.workspaceToCode(demoWorkspace);
        if(Jscode === "var Fruit;\n" +
            "\n" +
            "\n" +
            "Fruit = ['Apple', 'Orange', 'Banana'];\n" +
            "window.alert(Fruit);\n"){
            $('#nextalert').show();
            $('#alert').hide();
            $('#wrong').hide();
            window.location.href="/end.html";
        }
        else {
            $('#wrong').show();
        }
    }


    function saveWorkspace() {
        var xmlDom = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);
        var xmlText = Blockly.Xml.domToPrettyText(xmlDom);
        localStorage.setItem("blockly.xml", xmlText);
    }

    function loadWorkspace() {
        var xmlText = localStorage.getItem("blockly.xml");
        if (xmlText) {
            Blockly.mainWorkspace.clear();
            xmlDom = Blockly.Xml.textToDom(xmlText);
            Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xmlDom);
        }
    }


    demoWorkspace.addChangeListener(myUpdateFunction);



</script>


</body>
</html>